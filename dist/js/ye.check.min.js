"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if(!ye)var ye,JoleYe=ye={};!function(ye,$){var _DEFAULT_POST_OPTION={url:null,method:"ajax",validate:!0,msg:{right:"dright",error:"derr"},btn:{name:"#post",text:"load...",duplicate:!0}};ye.browser={},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(ye.browser.ie=document.documentMode||+RegExp.$1,ye.browser.ie6=/msie (6.\d)/i.test(navigator.userAgent)),ye.browser.firefox=/FireFox/i.test(navigator.userAgent),ye.g=function(t){return this.find(t),this._d},ye.find=function(t){return"string"==typeof t?/^(#)(\w|_|-)/.test(t)?this._d=document.getElementById(t.substring(1)):/^\.[\w_\-]+$|\[/.test(t)?this._d=$(t)[0]:this._d=document.getElementById(t):this._d=t,this},ye.array=function(t){return this._data_arr=t,this},ye.index=function(t){for(var e=0;e<this._data_arr.length;e++)if(this._data_arr[e]==t)return e;return-1},ye.isEmpty=function(t){return void 0===t||""==t||null==t},ye.next=function(t){for(var e=0;e<this._data_arr.length;e++)if(this._data_arr[e]==t&&e+1<this._data_arr.length)return this._data_arr[e+1];return this._data_arr[0]},ye.create=function(t){return document.createElement(t)},ye.css=function(t,e){if((t=ye.g(t))&&t.style)for(var n in e)t.style[n]=e[n]},ye.setAttr=function(t,e,n){if(void 0===n)for(var r in e){var i=ye._NAME_ATTR(r);t.setAttribute(i,e[r])}else t&&(e=ye._NAME_ATTR(e),/INPUT|FORM/.test(t.nodeName)&&"object"==_typeof(t.getAttribute(e))&&t.attributes[e]?t.attributes(e).value=n:t.setAttribute(e,n))},ye.getAttr=function(t,e){if(t)return t=this.g(t),e=ye._NAME_ATTR(e),/INPUT|FORM/.test(t.nodeName)?"object"!=_typeof(t.getAttribute(e))?t.getAttribute(e):t.attributes[e]?t.attributes[e].value:t.getAttribute(e):t.getAttribute(e)},ye.extend=function(t){for(var e in t)this["_"+e]=t[e]},ye._NAME_ATTR=function(t){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};return ye.browser.ie<8?(e.class="className",e.for="htmlFor"):(e.htmlFor="for",e.className="class"),e[t]||t},ye.option_valid=function(t){return"object"!=_typeof(t)||4!=t.length||0!=t[3]},ye.check=function(t,e){return new ye.fn(e,t,!1)},ye.verify=function(t,e){return new ye.fn(t,e,!0)},ye.fn=function(t,e,n){if(n)var r=this.get_def_rule(t),i=$.extend(r,e);else i=e;var o=$(t)[0];return this.init(i,o)},ye.fn.prototype.init=function(t,e){return this.conf=t,this._dom=e,this},ye.fn.prototype.setOption=function(t){this.conf=t(this.conf)},ye.fn.prototype.do_validate=function(t){var e=this.conf,n=!1;for(var r in this._option=t,e){if(ye.option_valid(e[r]))this._task_key(r)&&(n=!0)}return!n||(alert("信息填写格式错误或不完整，请检查红色标记部分"),!1)},ye.fn.prototype.get_def_rule=function(t){var a={};return $(t).find("input,textarea,select").each(function(){var t=this.id,e=$(this).attr("check-rule");"radio"==e&&(t=this.name);var n=$(this).attr("check-warning"),r=$(this).attr("check-correct");if(e&&t)a[t]=[e,n,r||""];else if(e){var i=new Date,o=this.name+i.getTime()+Math.round(1e5*Math.random());$(this).attr("id",o),a[o]=[e,n,r||""]}}),a},ye.assign=function(t,e){for(var n in e)n.hasOwnProperty&&(t[n]&&"object"===_typeof(t[n])?t[n]=this.assign(t[n],e[n]):t[n]=e[n]);return t},ye.fn.prototype.do_post=function(t){var e=this.conf,n=!1,r=ye.assign(_DEFAULT_POST_OPTION,t);if((this._option=r).validate)for(var i in e){if(ye.option_valid(e[i]))this._task_key(i)&&(n=!0)}if(n)r.errorCallback&&r.errorCallback(),alert("信息填写格式错误或不完整，请检查红色标记部分");else{if(r.beforeCallback&&!r.beforeCallback())return!1;if(void 0!==r.btn&&ye.g(r.btn.name)){var o=$(ye.g(r.btn.name));"BUTTON"==ye.g(r.btn.name).nodeName.toUpperCase()?(r.btn.original=o.html(),o.html(r.btn.text)):(r.btn.original=o.val(),o.val(r.btn.text)),ye.g(r.btn.name).disabled=!0}var a;if(void 0!==this._dom?a=this._dom:r.form&&(a=r.form),"ajax"==r.method){var s=r.url?r.url:$(a).attr("action");null!=s&&""!=s||(s=location.href),$.ajax({type:"POST",url:s,data:"json"==r.dataType?this.serializeObject($(a)):$(a).serialize(),dataType:r.dataType||"",contentType:r.contentType,success:function(t){setTimeout(function(){ye.g(r.btn.name)&&(r.btn.duplicate&&(ye.g(r.btn.name).disabled=!1),"BUTTON"==ye.g(r.btn.name).nodeName.toUpperCase()?ye.g(r.btn.name).innerHTML=r.btn.original:ye.g(r.btn.name).value=r.btn.original)},1200),r.success&&r.success.call(this,t)},fail:function(t){r.failed&&r.failed.call(this,t)}})}else r.success&&r.success.apply(this),a.submit()}return this},ye.fn.prototype.submit=function(e){var n=this;$(this._dom).submit(function(t){return n.do_post(e),t.stopPropagation(),!1})},ye.fn.prototype.serializeObject=function(t){var e,n,r,i,o;for(e=t.serializeArray(),r=(n={}).hasOwnProperty,i=0;i<e.length;i++)o=e[i],r.call(n,o.name)||(n[o.name]=o.value);return JSON.stringify(n)},ye.test=function(t){for(var e=!0,n=0;n<t.length;n++)if(func="_"+t[n].rule,!ye[func](null,t[n].value)){alert(t[n].warning),e=!1;break}return e},ye.fn.prototype._task_key=function(t){if(!ye.isEmpty(t)){var e=this.conf[t];if(ye.option_valid(e)){var n=!1,r=null,i=null;if(e[0]&&$("#"+t).hasClass("combo-f")){var o=(i=$(this._dom).find("*[name="+t+"]"))[0];r=i.val();var a=e[0];n=ye["_"+a](o,r)}else if(e[0])if(r=(i=0<$("#"+t).length?$("#"+t):$(t)).val(),-1<e[0].indexOf("|"))for(var s=e[0].split("|"),u=0;u<s.length&&!(n=ye["_"+s[u]](t,r));u++);else if(-1<e[0].indexOf("&"))for(s=e[0].split("&"),u=0;u<s.length;u++){if(!(n=ye["_"+s[u]](t,r)))break}else n=ye["_"+e[0]](t,r);var f=this._option,d=this._format_key(t)+"_msg",l=ye.g(d),c=!/^false$/.test(i.attr("check-show-label"));if(!l&&c){var y,_=ye.create("label");_.id=d,$(_).addClass("control-label").addClass("text-left"),(y=ye.g(t)?ye.g(t):this._option.form?$(this._option.form).find("*[name="+t+"]")[0]:$(this._dom).find("*[name="+t+"]")[0])&&y.parentNode&&y.parentNode.parentNode?y.parentNode.parentNode.appendChild(_):y.parentNode.appendChild(_),l=ye.g(d)}var h=this._task_var(e[2],2,t,e[0],r),p=this._task_var(e[1],1,t,e[0],r);return 2==n?void 0:n?($(l).html(h),$(l).removeClass(f.msg.error).addClass(f.msg.right),void ye.css(ye.g(t),{borderColor:"",backgroundColor:""})):($(l).html(p),$(l).removeClass(f.msg.right).addClass(f.msg.error),ye.css(ye.g(t),{borderColor:"#f00",backgroundColor:"#FFCCCC"}),!0)}}},ye.fn.prototype._format_key=function(t){return/\[name\=\w+\]/.test(t)?/\[name=\w+\]/.exec(t)[0].replace("[name=","").replace("]",""):t},ye.fn.prototype._task_var=function(k,index,id,rule,val){if("function"==typeof k)return k(index,id,rule,val);if(void 0===k||0!=k.indexOf("@"))return k;var val=k.substring(1),ret="";return eval("ret="+val),ret},ye.fn.prototype._do_blur=function(t){this._task_key(t)},ye.fn.prototype.do_blur=function(t){this._option=$.extend(_DEFAULT_POST_OPTION,t);var e=this;for(var n in this.conf)ye.option_valid(this.conf[n])&&("radio"==this.conf[n][0]?$("input[name="+n+"]").on("blur",function(){ye._do_blur(this.id)}):$("#"+n).on("blur",function(){e._do_blur(this.id)}));return this},ye.fn.prototype.do_keyup=function(t){for(var e in this._option=t,this.conf)ye.option_valid(this.conf[e])&&(ye.g(e).onkeyup=function(){ye._do_blur(this.id)});return this},ye._mobile=function(t,e){return/^1\d{10}$/.test(e)},ye._email=function(t,e){return/^(\w|\d|_|\-|\.){1,20}@(\w|\d|-)+\.(com|cn|net|gov\.cn|com\.cn|net\.cn)$/.test(e)},ye._date=function(t,e){return/^\d{4}\-\d{1,2}-\d{1,2}$/.test(e)},ye._require=function(t,e){return!(!e||""==e)},ye._require0=function(t,e){return"0"!=e},ye._sex=function(t){return this._radio(t)},ye._radio=function(t){for(var e=document.getElementsByTagName("input"),n=0;n<e.length;n++)if(e[n].name==t&&e[n].checked)return!0;return!1},ye._int=function(t,e){return void 0===e&&(e=ye.g(t).value),/^\d+$/.test(e)},ye._price=function(t,e){return/^(\d|\.|\-)+$/.test(e)},ye._phone=function(t,e){return/(^\d{11}$)|(^\d{3,5}\-\d{7,8}$)|(^\d{3,5}\-\d{7,8}\-\d{4}$)/.test(e)},ye._idcard=function(t,e){return/^[\dxX]{15,18}$/.test(e)},ye._age=function(id,val){var d=ye.g(id),checkconf=ye.getAttr(d,"check-conf");return eval("var cdataconf="+checkconf),val>cdataconf.agestart&&val<=cdataconf.ageend},ye._ip=function(t,e){void 0===e&&(e=ye.g(t).value);return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)},ye._null=function(t,e){return ye.isEmpty(e)}}(ye,$);